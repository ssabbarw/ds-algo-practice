from typing import Optional
# Definition for singly-linked list.
class ListNode:
    def __init__(self, val=0, next=None):
        self.val = val
        self.next = next
    def __repr__(self):
        return f"{self.val}->"


class Solution:
    def reorderList(self, head: Optional[ListNode]) -> None:
        if head is None:
            return head

        if head.next is None:
            return head
        # find mid
        slow = fast = head
        print("Entire list:")
        self.print_list(head)
        last_of_first = None
        while fast is not None and fast.next is not None:
            last_of_first = slow
            slow = slow.next
            fast = fast.next.next

        # detach first half from second
        last_of_first.next = None

        # reverse second half
        second_head = slow
        dummy = ListNode(1001, second_head)

        prev = None

        while second_head.next:
            next_node = second_head.next
            second_head.next = prev
            prev = second_head
            second_head = next_node

        second_head.next = prev

        print("\nFirst half:-")
        self.print_list(head)
        print("\nsecond half reversed:-")
        self.print_list(second_head)

        old_head = head
        # now merge two lists
        while second_head and head:
            first_temp = head.next
            second_temp = second_head.next

            head.next = second_head
            second_head.next = first_temp

            head = first_temp
            second_head = second_temp

        print("done with solution:")
        self.print_list(old_head)

        list_head = old_head
        while list_head.next:
            list_head = list_head.next

        while head:
            list_head.next = head
            head = head.next

        while second_head:
            list_head.next = second_head
            second_head = second_head.next


        return old_head

    def print_list(self, head):
        str = ""
        while head:
            str += f"{head}"
            head = head.next
        print(str)

nums = [1,1,1,1,1,2,1,3,1,1,1,3,3,3,3,2,2,3,2,1,2,1,2,2,2,3,1,3,2,2,1,3,2,1,1,3,3,3,1,2,1,3,1,1,3,1,2,1,1,3,3,3,3,2,3,3,3,3,2,2,1,3,2,2,3,3,1,1,3,1,3,3,2,2,3,3,1,3,1,1,3,2,3,3,2,2,1,1,2,1,1,2,2,1,3,1,1,3,3,2,1,2,2,3,1,2,3,1,3,2,1,2,1,3,1,3,3,3,1,2,3,1,3,2,3,1,1,1,3,2,2,2,1,3,1,1,2,2,2,1,1,1,1,2,1,2,1,2,3,3,3,2,1,1,3,1,1,2,3,3,2,3,1,2,1,1,1,2,1,1,2,1,2,2,2,2,3,1,3,2,1,1,2,3,1,3,1,1,2,2,3,1,1,1,3,1,3,1,1,2,3,2,3,2,1,2,1,1,1,3,1,2,2,3,3,1,3,1,2,3,3,1,2,1,1,3,1,2,2,3,1,2,3,3,2,2,2,1,1,3,1,2,3,2,2,3,3,2,3,2,1,3,3,1,2,2,2,2,1,3,2,1,1,2,1,1,1,1,2,3,3,1,1,2,1,1,1,3,2,3,3,1,2,1,3,3,2,1,3,2,1,3,1,2,2,3,3,2,3,1,3,1,1,3,3,1,3,3,2,2,3,2,3,2,2,2,3,2,2,3,3,3,1,1,2,2,3,3,3,1,3,3,2,2,2,1,3,3,2,2,3,2,1,2,3,1,2,1,3,1,3,1,1,3,3,2,2,1,1,2,2,1,3,2,3,3,1,1,2,1,2,1,1,1,1,1,3,3,2,2,3,2,1,1,1,2,2,2,1,1,1,3,3,1,1,2,2,1,1,2,3,3,2,3,3,2,1,1,3,1,2,3,2,2,2,3,3,1,1,3,3,2,1,1,3,2,3,2,1,3,2,2,1,2,2,2,1,1,3,3,2,2,3,3,1,1,1,1,1,3,1,2,3,3,1,3,3,2,3,2,3,3,3,3,3,3,2,1,3,2,2,3,1,1,3,3,2,2,3,1,2,1,3,1,2,1,2,1,3,2,1,3,3,2,2,2,2,2,1,3,3,2,1,1,3,1,1,2,3,1,3,3,1,3,3,1,3,1,2,2,1,1,1,2,1,1,2,1,3,1,3,2,1,2,2,3,2,3,3,2,3,3,1,2,3,1,2,1,2,2,3,3,2,1,3,3,1,3,2,1,2,1,3,1,2,3,2,2,2,1,3,2,2,3,2,3,2,1,1,3,1,3,3,3,3,1,2,2,3,1,1,3,1,2,1,2,1,1,3,1,1,3,1,1,3,3,1,2,3,1,3,1,3,2,1,3,1,2,1,2,1,1,1,3,1,3,3,3,2,1,2,1,1,1,2,2,3,1,3,2,1,2,3,3,1,2,2,1,2,2,1,1,3,1,1,3,3,2,2,1,1,2,1,3,1,3,3,1,2,1,2,3,2,3,2,2,3,3,1,1,3,1,1,1,3,2,3,3,3,2,2,1,2,2,2,1,1,1,2,3,3,3,1,2,3,1,1,2,3,3,1,2,3,1,3,1,2,2,2,2,2,1,2,2,3,2,1,1,3,2,1,1,2,2,1,1,2,3,3,3,2,2,2,2,2,1,3,3,1,3,1,2,1,2,3,2,1,2,1,2,1,3,3,1,1,1,1,2,2,3,2,3,3,2,2,3,1,3,1,2,3,3,2,3,2,1,2,1,1,3,2,2,1,2,1,3,2,1,3,3,1,1,3,3,3,2,1,2,3,1,1,1,1,1,1,3,3,2,2,3,2,3,2,3,2,2,2,3,1,3,1,3,1,2,2,3,1,3,1,3,2,1,3,1,1,3,3,1,3,1,1,2,1,2,1,3,3,1,2,1,3,3,1,2,1,2,3,2,1,1,3,3,2,1,1,2,1,3,1,2,3,1,2,3,2,1,3,3,1,1,3,2,2,3,2,3,3,2,1,3,3,3,3,2,3,3,3,3,1,3,1,1,1,1,2,2,1,2,1,1,1,2,1,3,3,3,1,2,2,1,3,2,3,2,3,1,1,1,2,1,3,1,2,1,2,2,2,3,1,3,1,3,1,3,2,3,2,3,3,2,2,2,3,1,2,1,3,2,1,1,3,2,3,3,2,1,1,1,2,2,1,1,3,2,2,3,1,2,2,3,1,2,2,3,3,1,3,3,1,2,1,1,3,3,3,2,3,1,2,3,2,3,3,3,2,2,1,2,2,1,2,2,1,2,3,1,1,1,1,1,2,1,3,2,1,3,3,1,2,1,1,3,2,1,2,2,3,1,1,1,3,2,2,3,2,2,1,3,2,1,2,3,1,2,2,1,3,3,1,1,3,2,3,1,3,1,1,2,3,3,3,3,2,1,2,2,3,3,2,2,3,3,2,2,3,2,3,1,2,3,3,2,2,3,3,2,2,1,1,2,3,1,2,3,1,3,2,3,3,2,1,2,1,2,1,2,3,2,3,1,1,3,3,3,3,3,2,3,3,1,3,2,1,3,3,3,2,1,2,2,1,2,1,1,3,3,1,2,2,2,3,1,2,2,1,2,2,3,2,3,1,3,3,3,1,2,3,3,2,2,3,1,3,1,1,2,3,3,1,1,1,1,3,2,3,3,3,2,1,3,2,3,3,2,2,1,3,3,2,1,1,1,2,1,2,3,1,1,2,2,3,1,1,2,3,1,2,1,3,1,1,2,2,1,3,2,3,2,2,1,3,2,2,1,3,3,1,2,3,3,2,1,1,1,1,3,3,3,1,2,1,2,2,2,3,3,3,2,3,1,2,2,1,2,1,1,3,2,2,3,2,3,3,2,3,2,2,3,2,3,1,1,1,3,3,1,3,1,3,3,1,1,2,1,1,3,1,1,3,3,1,1,3,3,2,1,3,1,3,2,2,2,2,1,2,3,2,2,2,1,2,3,2,1,1,1,3,3,3,3,2,3,1,2,2,2,1,2,1,3,2,3,2,2,1,3,2,1,2,2,2,2,2,1,3,2,2,2,1,3,3,1,3,3,3,3,2,1,3,1,1,1,1,3,2,1,1,3,1,3,1,1,2,2,2,2,1,2,2,3,3,2,3,1,3,1,2,2,1,2,3,3,1,2,3,2,1,1,2,3,3,3,2,2,3,1,2,3,1,2,1,3,1,1,1,3,3,2,3,2,2,1,2,1,1,2,3,3,3,1,1,2,2,1,2,3,2,1,3,2,2,1,2,1,3,2,1,1,3,2,3,1,3,3,2,1,2,1,1,3,2,2,1,3,2,2,2,3,3,1,2,1,1,2,3,3,2,1,1,2,2,1,3,2,2,1,2,2,3,1,3,1,1,3,2,2,2,3,1,3,1,3,1,2,2,3,2,2,2,3,2,2,2,1,2,1,1,1,1,2,3,2,3,3,3,2,2,1,3,2,1,3,3,3,3,3,2,3,3,1,1,2,3,1,3,1,2,3,1,3,2,1,3,2,2,3,2,3,2,2,1,1,1,3,2,1,1,1,3,3,2,3,1,3,1,3,3,2,2,2,2,2,3,3,3,3,3,3,3,2,3,1,2,1,3,2,3,1,2,2,2,3,1,1,3,1,1,3,1,2,1,2,1,1,2,2,1,3,1,2,2,1,1,3,1,3,3,3,2,2,2,3,2,1,1,1,2,3,2,3,2,2,3,2,1,3,3,3,1,3,1,3,2,3,2,3,3,2,3,2,3,1,1,2,2,3,1,3,3,2,2,1,3,1,2,1,1,1,1,2,3,1,3,3,3,1,2,2,1,2,3,3,2,3,3,3,2,3,2,2,3,1,2,1,3,2,1,1,2,3,3,3,3,3,2,3,2,3,3,2,1,3,3,3,1,3,3,2,2,1,1,3,2,3,2,2,3,2,3,1,1,2,2,1,2,3,1,1,1,3,1,3,1,2,1,3,2,3,3,1,1,2,2,1,2,3,1,3,2,1,1,1,2,1,3,1,1,2,1,3,3,3,1,2,2,3,1,1,1,3,1,3,3,3,2,2,1,3,1,3,3,3,1,2,2,3,3,1,3,1,3,3,3,1,2,1,1,3,1,3,1,2,2,3,1,2,1,3,1,1,1,1,3,3,1,3,3,1,1,2,1,2,3,3,1,1,1,2,1,1,3,3,1,1,1,1,3,2,1,3,1,2,2,2,2,1,1,2,2,1,3,3,1,3,2,1,2,2,2,1,3,3,2,1,2,1,3,3,2,3,1,2,1,3,1,1,1,1,3,1,2,3,3,1,2,2,2,3,2,2,1,3,1,2,1,3,1,2,2,2,1,2,1,1,2,3,1,2,1,3,1,1,3,2,2,3,1,1,2,3,2,3,3,2,2,3,2,2,1,2,3,2,1,2,3,1,2,2,1,3,2,2,2,2,2,3,2,1,1,2,1,2,1,2,2,2,1,3,3,3,2,3,2,2,1,1,1,3,1,3,2,3,3,1,1,1,1,3,2,3,1,1,1,3,3,2,2,3,1,2,3,3,1,1,2,1,1,2,1,3,3,1,3,1,2,2,2,2,2,1,2,3,3,2,3,2,3,1,3,2,2,1,3,1,1,3,2,3,1,2,3,3,3,2,1,1,1,2,1,1,1,3,1,2,1,3,3,3,3,2,1,1,1,2,1,3,2,1,1,3,2,1,1,1,1,2,3,3,3,1,2,1,2,1,1,3,1,3,1,1,3,1,3,1,3,1,2,3,3,1,2,3,1,3,3,3,3,3,1,1,3,2,3,3,2,2,3,3,2,3,3,2,2,3,1,3,2,1,2,3,1,1,1,3,3,3,2,1,2,3,1,3,3,1,3,3,3,2,1,2,2,3,1,1,2,1,1,1,2,1,2,1,1,2,1,3,1,3,2,1,2,1,1,2,3,2,1,3,1,3,1,2,2,2,1,3,2,3,1,1,2,1,2,2,3,1,1,3,2,2,3,1,2,1,2,3,1,3,1,3,3,1,3,1,1,1,3,1,1,2,3,2,2,2,2,1,3,3,3,3,1,1,1,1,2,2,1,3,3,3,1,2,3,2,2,3,2,3,2,2,3,3,1,3,1,3,1,1,1,1,2,3,1,3,2,2,2,1,3,2,1,3,2,3,2,3,2,2,1,1,2,2,3,2,2,3,2,3,3,1,1,1,1,1,1,3,1,1,3,1,3,3,1,1,3,3,1,3,2,3,3,1,3,3,2,1,3,3,2,1,1,3,3,3,2,3,1,3,2,1,3,3,2,3,2,2,3,2,2,2,2,2,2,1,2,3,3,1,2,1,2,3,3,3,2,3,1,1,3,2,3,1,1,1,3,3,1,3,3,3,1,2,1,2,2,2,3,2,3,1,3,2,3,1,3,2,1,3,2,3,1,3,2,3,2,1,2,1,3,1,2,1,1,1,2,1,3,2,3,2,2,2,2,3,1,2,1,3,2,1,1,3,1,2,3,1,3,1,2,1,3,3,3,2,1,1,3,2,3,1,1,3,1,1,2,3,1,1,2,2,3,2,3,1,3,3,3,2,3,2,1,1,3,3,1,1,1,3,2,3,1,3,3,2,1,1,3,1,3,2,2,1,1,3,2,3,3,1,1,3,1,1,3,2,1,1,3,2,3,3,1,3,2,2,2,2,3,1,3,1,2,3,2,2,3,1,2,1,1,2,1,1,3,3,3,3,2,2,1,3,2,1,3,2,2,1,3,1,2,1,2,3,2,3,1,3,3,1,2,2,2,3,1,2,1,3,1,2,2,1,1,3,2,3,2,3,2,1,2,2,2,2,2,2,2,3,3,3,1,1,1,1,1,3,2,2,3,2,3,2,1,3,2,1,3,2,3,1,1,1,2,3,3,1,1,3,2,2,3,3,1,3,3,3,1,2,2,3,1,3,3,2,2,2,3,3,1,1,2,1,1,3,2,1,3,2,1,3,2,2,3,1,1,1,2,1,2,1,1,3,3,3,1,1,3,2,3,1,1,1,2,3,1,2,1,1,3,3,1,2,2,3,1,2,3,1,1,2,3,3,2,1,3,2,3,2,3,2,1,2,2,2,2,3,2,1,1,1,2,1,2,1,3,1,2,1,1,3,3,3,2,3,2,1,3,2,3,2,1,3,3,3,3,3,3,1,3,3,3,2,2,3,1,1,1,2,1,3,2,1,1,2,3,1,2,1,1,1,1,1,3,3,3,3,2,1,1,1,3,1,2,2,3,2,3,2,1,1,3,2,2,2,2,2,1,2,3,3,3,3,2,1,2,2,2,2,2,2,3,3,1,2,2,3,1,2,1,2,1,2,1,3,1,2,3,3,3,1,1,1,3,1,3,2,3,1,3,2,2,1,1,2,2,3,1,2,2,3,2,3,3,2,2,3,3,2,1,3,2,1,3,3,3,2,1,1,1,2,3,3,2,1,2,3,1,3,3,3,2,2,2,1,1,1,3,2,2,1,1,1,3,3,1,1,2,2,3,2,1,2,3,2,3,1,2,2,2,2,1,1,3,1,3,1,3,1,3,2,3,3,3,1,2,3,3,3,3,1,2,2,1,3,2,2,1,3,3,3,1,3,3,2,1,2,2,2,3,1,3,3,3,2,3,3,2,2,2,2,3,1,2,3,3,2,2,2,2,2,1,2,3,1,1,1,2,2,1,2,3,3,2,2,1,3,1,1,3,1,3,3,2,2,3,2]
print(len(nums))

prev = None
head = None
for num in nums:
    if prev is None:
        prev = ListNode(num)
        head= prev
    else:
        prev.next = ListNode(num)
        prev = prev.next

head = Solution().reorderList(head)
str = ""
while head:
    str += f"{head}"
    head = head.next

print(str)